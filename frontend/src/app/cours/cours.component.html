<div class="min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8">
  <div class="max-w-4xl mx-auto">

    <!-- Header -->
    <header class="mb-10 flex items-center justify-between border-b border-gray-200 pb-5">
      <h1 class="text-3xl font-extrabold text-gray-900 tracking-tight">ğŸ’ Mes cours</h1>
      <span *ngIf="!loading && !error" class="bg-indigo-100 text-indigo-700 px-3 py-1 rounded-full text-sm font-medium">
        {{ matieres.length }} MatiÃ¨re{{ matieres.length > 1 ? 's' : '' }}
      </span>
    </header>

    <div *ngIf="loading" class="flex flex-col items-center justify-center p-20 space-y-4">
      <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"></div>
      <p class="text-gray-500 font-medium animate-pulse">Chargement de vos cours...</p>
    </div>

    <div *ngIf="error" class="bg-red-50 border-l-4 border-red-500 p-4 rounded shadow-sm mb-6">
      <div class="flex items-center">
        <span class="text-red-500 mr-3">âš ï¸</span>
        <p class="text-red-700 font-medium">{{ error }}</p>
      </div>
    </div>

    <div *ngIf="coursSelectionne" class="mb-6">
      <div class="flex items-center justify-between mb-4">
        <button (click)="fermerCours()" class="flex items-center text-indigo-600 hover:text-indigo-800 font-medium">
          â† Retour aux cours
        </button>
        <button (click)="chatOuvert = !chatOuvert"
                class="flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-purple-500 to-indigo-600 text-white text-sm font-medium rounded-lg hover:opacity-90 transition">
          <span>{{ chatOuvert ? 'Fermer Klub AI' : 'Ouvrir Klub AI' }}</span>
        </button>
      </div>
      <div [class]="chatOuvert ? 'flex flex-col lg:flex-row gap-4' : ''">
        <div [class]="chatOuvert ? 'lg:flex-1 min-w-0' : 'w-full'" class="bg-white rounded-xl shadow p-6">
          <p class="text-xs text-gray-400 uppercase mb-1">{{ matiereSelectionnee }}</p>
          <h2 class="text-2xl font-bold text-gray-900 mb-4">{{ coursSelectionne.nom }}</h2>
          <div class="whitespace-pre-wrap text-gray-700 text-sm leading-relaxed" [innerHTML]="coursSelectionne.contenu | markdown"></div>
        </div>
        <div *ngIf="chatOuvert" class="w-full lg:w-96 flex-shrink-0 h-[500px] lg:h-[600px]">
          <app-chat-cours [coursMd]="coursSelectionne.contenu"></app-chat-cours>
        </div>
      </div>
    </div>
    <div *ngIf="!loading && !error && !coursSelectionne" class="space-y-8">
      <div *ngFor="let matiere of matieres">
        <h2 class="text-lg font-bold text-gray-700 uppercase tracking-wide mb-3">{{ matiere }}</h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
          <div *ngFor="let c of cours[matiere]"
               (click)="ouvrirCours(matiere, c)"
               class="bg-white rounded-xl shadow-sm border border-gray-200 p-5 cursor-pointer hover:shadow-md hover:border-indigo-300 transition-all duration-200 hover:scale-105">
            <div class="flex items-center space-x-3">
              <span class="text-2xl">ğŸ“</span>
              <div>
                <p class="font-semibold text-gray-800">{{ c.nom }}</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>